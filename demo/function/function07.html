<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <pre>使用递归输出以下结构。</pre>
  <pre>
  Desktop
  ├─.DS_Store
  ├─.localized
  ├─dir1
  ｜ ├─file1
  ｜ └file2
  ｜ ｜ ├─file3
  ├─dir2
  ｜ ├─file4
  ｜ └file5
  </pre>
  <script>
    var data = {
      parent: 'project',
      children: [
        {
          parent: '.DS_Store',
          children: []
        },
        {
          parent: '.localized',
          children: []
        },
        {
          parent: 'dir1',
          children: [
            {
              parent: 'file1',
              children: [{
                parent: 'file5',
                children: []
              }]
            },
            {
              parent: 'file2',
              children: [{
                parent: 'file6',
                children: []
              }]
            }
          ]
        },
        {
          parent: 'dir2',
          children: [{
            parent: 'file3',
            children: []
          }]
        }
      ]
    }
    // var s = ''
    var sum = ''
    function toTree(obj, index) {
      var s = ''
      if (index === 0) {
        sum = obj.parent + '<br/>'
      }
      obj.children.forEach(el => {
        if (index >= 1) {
          s = ''
          for(var i = 0; i < index; i++) {
            s += '｜&nbsp;&nbsp;&nbsp;'
          }
        }
        sum += s + '├─' + el.parent + '<br/>'
        toTree(el, index+1)
      });
      
    }
    toTree(data, 0)
    document.write(sum)

    // const digui = ({parent, children}) => {
    //   return `
    //   <ul>
    //     ├─ ${parent}
    //     ${children.reduce((str, item) => str + digui(item), '')}
    //   </ul>
    //   `
    // }
    // document.write(digui(data))

    // const digui = ({parent, children}, index = 0) => {
    //   const arr = index - 1 > 0 ? Array(index - 1).fill() : []
    //   const line = arr.reduce((str, item) => str + '｜&nbsp;&nbsp;&nbsp;', '')
    //   console.log(index)
    //   return `
    //   <div>
    //     ${line}${index === 0 ? '' : '├─'}${parent}
    //     ${children.reduce((str, item) => str + digui(item, index + 1), '')}
    //   </div>
    //   `
    // }
    // document.write(digui(data))
  </script>
</body>

</html>